<html>
<head>
<title>Snake</title>
<script language="JavaScript">

class Canvas {
    constructor(canvasNode, scale){
        this._canvasNode = canvasNode;
        this._scale = scale;
    }
    
    clear(){
        let context = this._getContext();
        context.clearRect(0, 0, this._canvasNode.width, this._canvasNode.height);
    }
    
    drawSnake(snakeID){
        let points = window.getPositionForSnake(snakeID);
        if (typeof points != 'undefined') {
            for (let i = 0; i<points.length; i++){
                this._drawPoint(points[i],"#000000");
            }
        }
    }
    
    _drawPoint(point, color){
        let context = this._getContext();
        context.fillStyle = color;
        let maxY = this._canvasNode.height/this._scale - 1;
        let x = this._scale * point.x;
        let y = this._scale * (maxY - point.y);
        
        context.fillRect(x, y, this._scale, this._scale);
    }
    
    _getContext(){
        return this._canvasNode.getContext("2d");
    }

}

function drawNow(){
    let canvasNode = document.getElementById("myCanvas");
    
    let canvas = new Canvas(canvasNode, 10);
    canvas.clear();
    
    let snakeIDs = window.getSnakeIDs();
    for (let i = 0; i<snakeIDs.length; i++){
        canvas.drawSnake(snakeIDs[i]);
        
    }

}

</script>

</head>
<body bgcolor="white">

<canvas id="myCanvas" width="500" height="500" style="border:1px solid #d3d3d3;">

</body>
</html>
